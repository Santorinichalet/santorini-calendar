<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¨Ø·Ø§Ù‚Ø© Ø­Ø¬Ø²Ùƒ - Ø³Ù†ØªÙˆØ±ÙŠÙ†ÙŠ Ø´Ø§Ù„ÙŠÙ‡</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
<style>
body {
  font-family: 'Tajawal', sans-serif;
  background: linear-gradient(to bottom, #e6f0ff, #ffffff);
  color: #333;
  text-align: center;
  padding: 20px;
}
.card {
  background: #fff;
  color: #333;
  padding: 20px;
  margin: 20px auto;
  border-radius: 12px;
  max-width: 400px;
  box-shadow: 0 0 15px rgba(0,0,0,0.2);
}
button {
  background: #007bff;
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 8px;
  cursor: pointer;
}
.logo {
  width: 120px;
  display: block;
  margin: 0 auto 15px;
}
</style>
</head>
<body>

<img src="https://i.ibb.co/271BVWXd/Santorini-Logo.png" alt="Ø´Ø¹Ø§Ø± Ø³Ù†ØªÙˆØ±ÙŠÙ†ÙŠ Ø´Ø§Ù„ÙŠÙ‡" class="logo">
<h2 style="color:#024488;">ğŸ‰ Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø³Ù†ØªÙˆØ±ÙŠÙ†ÙŠ Ø´Ø§Ù„ÙŠÙ‡</h2>
<div class="card" id="reservationCard">
  <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø¬Ø²Ùƒ...</p>
</div>

<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
<script>
const firebaseConfig = {
  apiKey: "AIzaSyAs1Qz1_8Bge6LvIZ61CsjQV4P8RSa8t4A",
  authDomain: "santorini-chalet.firebaseapp.com",
  projectId: "santorini-chalet",
  storageBucket: "santorini-chalet.firebasestorage.app",
  messagingSenderId: "280049242908",
  appId: "1:280049242908:web:2e6e7d9d88506c764760d9",
  measurementId: "G-D8THYXGFSN"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

const params = new URLSearchParams(window.location.search);
const id = params.get("id");

const card = document.getElementById("reservationCard");

if (!id) {
  card.innerHTML = "âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ù‚Ù… Ø­Ø¬Ø² ÙÙŠ Ø§Ù„Ø±Ø§Ø¨Ø·.";
} else {
  db.collection("calendar2025").doc(id).get()
    .then(doc => {
      if (!doc.exists) {
        console.log("ğŸš« Ø§Ù„ÙˆØ«ÙŠÙ‚Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©");
        card.innerHTML = "âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø¬Ø².";
        return;
      }

      console.log("âœ… Ø§Ù„ÙˆØ«ÙŠÙ‚Ø© Ù…ÙˆØ¬ÙˆØ¯Ø©", doc.data());
      const data = doc.data();

      // Ù†Ø­Ø§ÙˆÙ„ Ø¥ÙŠØ¬Ø§Ø¯ Ø£ÙŠ ÙØªØ±Ø© ÙÙŠÙ‡Ø§ Ø¨ÙŠØ§Ù†Ø§Øª
      const booking =
        data.overnight ||
        data.fullDay ||
        data.morning ||
        data.evening;

      if (!booking) {
        card.innerHTML = "âš ï¸ Ø§Ù„Ø­Ø¬Ø² Ù…ÙˆØ¬ÙˆØ¯ Ù„ÙƒÙ† Ø¨Ø¯ÙˆÙ† Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø­Ø¬Ø².";
        return;
      }

      card.innerHTML = `
        <h3>Ù…Ø±Ø­Ø¨Ù‹Ø§ ${booking.guestName || "Ø¶ÙŠÙÙ†Ø§ Ø§Ù„ÙƒØ±ÙŠÙ…"}</h3>
        <p>âœ… Ø­Ø¬Ø²Ùƒ Ù…Ø¤ÙƒØ¯</p>
        <p>ğŸ“† Ø§Ù„ØªØ§Ø±ÙŠØ®: ${id}</p>
        <p>â° Ø§Ù„ÙˆÙ‚Øª: ${booking.timePeriod || "---"}</p>
        <p>ğŸ’µ Ø§Ù„Ø³Ø¹Ø±: ${booking.amount || 0} Ø±.Ø¹</p>
        <p>ğŸ“ <a href="https://maps.google.com/?q=23.5859,58.4059" target="_blank">Ø±Ø¤ÙŠØ© Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</a></p>
        <h3 style="color:#007bff;">ğŸ”‘ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ù„Ù„Ø¯Ø®ÙˆÙ„: <br> #111111#</h3>
      `;
    })
    .catch(err => {
      console.error("ğŸ”¥ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª", err);
      card.innerHTML = "âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.";
    });
}


      <hr>
      <h4 style="color:#024488;">â­ ØªÙ‚ÙŠÙŠÙ… ØªØ¬Ø±Ø¨ØªÙƒ</h4>
      <form onsubmit="submitFeedback(event)">
        <div>
          <label>â­â­â­â­â­</label>
          <select id="stars">
            <option value="5">5</option>
            <option value="4">4</option>
            <option value="3">3</option>
            <option value="2">2</option>
            <option value="1">1</option>
          </select>
        </div>
        <textarea id="comments" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ..." style="width:90%;margin-top:10px;"></textarea><br>
        <button type="submit">Ø¥Ø±Ø³Ø§Ù„</button>
      </form>
    `;
  });
}

function submitFeedback(e) {
  e.preventDefault();
  const stars = document.getElementById("stars").value;
  const comments = document.getElementById("comments").value;
  alert(`ğŸŒŸ Ø´ÙƒØ±Ù‹Ø§ Ù„ØªÙ‚ÙŠÙŠÙ…Ùƒ!\nØ§Ù„Ù†Ø¬ÙˆÙ…: ${stars}\nÙ…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ: ${comments}`);
}
</script>
</body>
</html>
